# Schedule: kill 5 worker pods every 5 minutes.
# Repeated chaos for "Worker pod kills" (20-seed, 31w, 1gw).
# Observe: KEDA scale-up, frontier lag, Kafka rebalances over multiple cycles.
#
# Apply:  kubectl apply -f deploy/kubernetes/chaos-mesh/workflows/schedule-worker-pod-kill-5.yaml
# Pause:  kubectl annotate schedule worker-pod-kill-5 -n chaos-mesh experiment.chaos-mesh.org/pause=true
# Resume: kubectl annotate schedule worker-pod-kill-5 -n chaos-mesh experiment.chaos-mesh.org/pause-
# Remove: kubectl delete -f deploy/kubernetes/chaos-mesh/workflows/schedule-worker-pod-kill-5.yaml
apiVersion: chaos-mesh.org/v1alpha1
kind: Schedule
metadata:
  name: worker-pod-kill-5
  namespace: chaos-mesh
spec:
  schedule: "@every 5m"
  historyLimit: 5
  concurrencyPolicy: Forbid
  type: PodChaos
  podChaos:
    action: pod-kill
    mode: fixed
    value: "5"
    selector:
      namespaces:
        - default
      labelSelectors:
        app: relentless-worker
